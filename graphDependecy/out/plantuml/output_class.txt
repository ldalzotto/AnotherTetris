@startuml
scale 3840*2160
interface ITetrisElementGenerator{ 
private IPhysicsGeneration iPhysicsGeneration;
private IGraphicsGeneration iGraphicsGeneration;
private IShapeDebugger iShapeDebugger;
private ITetElementPoolable iTetElementPoolable;
TetrisElement createTetrisElement(List<Vector2> worldPositions, float tetrisGridWidth)
GridLimits createTetrisGrid(Rectangle bottomPos, Rectangle leftPos, Rectangle rightPos)
}
interface ITetElementVolumeCalculation{ 
private IShapeDebugger iShapeDebugger;
List<Polygon> splitPolygonFromLine(Polygon polygon, Polyline polyline)
List<Float> calculatePolygonVolumes(List<Polygon> polygons)
}
class TetrisElementDomainContants

interface IOutboundDestroyerGenerator{ 
private final Integer BOUND_WIDTH_SCREEN_PERCENT 
private ITetrisPhysicsContactGeneration iTetrisPhysicsContactGeneration;
private IPhysicsGeneration iPhysicsGeneration;
public OutboundDestroyer createOutboundDestroyer()
}
interface IPhysicsGeneration{ 
private static Vector2 BLOCK_VELOCITY 
private ITetrisPhysicsContactGeneration iTetrisPhysicsContactGeneration;
Body createTetrisElementBody(List<Vector2> worldPositions, float blockWidht, float blocHeight)
Body createGridLimitRectangle(Vector2 worldPosition, float width, float height)
Body createRectangleBody(Vector2 worldPosition, float width, float height)
}
interface ITetElementPoolable{ 
private final Pool<TetrisElement> tetrisElementPool 
public TetrisElement getElementInstance()
public void deleteElementFromGrid(TetrisElement tetrisElement)
}
interface IMultipleContactListener{ 
private List<ContactListener> activecContactListeners 
boolean addContactListener(ContactListener contactListener)
}
interface ITetrisGrid{ 
private ITetrisPhysicsWorld iTetrisPhysicsWorld;
private IGraphicContext iGraphicContext;
private ITetElementToPositionnedSprite iTetElementToPositionnedSprite;
private ITetElementPoolable iTetElementPoolable;
private OutboundDestroyer outboundDestroyer;
private List<TetrisElement> tetrisElements 
boolean addTetrisElement(TetrisElement tetrisElement)
void renderAndUpdate(float delta)
void setOutboundDestroyer(OutboundDestroyer outboundDestroyer)
void deleteElementFromGrid(TetrisElement tetrisElement)
}
interface ITetrisPhysicsContactGeneration{ 
private IMultipleContactListener iMultipleContactListener;
private ITetrisPhysicsWorld iTetrisPhysicsWorld;
void createAndRegisterBlockContact()
void addContactListener(ContactListener contactListener)
}
class TetrisGridContants

class AnotherTetris

interface IElementEraser{ 
private List<TetrisElement> elementsToErase 
private ITetrisGrid iTetrisGrid;
private ITetrisPhysicsWorld iTetrisPhysicsWorld;
void addElementToErase(TetrisElement tetrisElement)
void eraseAllElements()
}
class SingleDestroyer

interface IGridInitializer{ 
private ITetrisElementGenerator iTetrisElementGenerator;
private IOutboundDestroyerGenerator iOutboundDestroyerGenerator;
private ITetrisGrid iTetrisGrid;
void initializeGrid()
}
interface IPhysicsDebugger{ 
private static String KEY_DELIMITER 
private Map<String, String> keysFromFile 
private File configurationFile;
boolean isDebugEnabled()
}
interface IElementSpawn{ 
void spawnElement()
}
interface IGraphicContext{ 
void render(List<Sprite> sprites)
SpriteBatch getSpriteBatch()
}
interface ITetElementToPositionnedSprite{ 
private IShapeDebugger iShapeDebugger;
List<Sprite> getSpritesFromTetrisElement(TetrisElement tetrisElement)
}
interface ITetrisRewardDetection{ 
private Boolean generated 
void checkRewardAndSpawn()
}
interface IShapeDebugger{ 
private IPhysicsDebugger iPhysicsDebugger;
private ShapeRenderer shapeRenderer;
private List<Event> drawEvents 
void render(Camera camera, float delta)
boolean pushDrawEvent(Function<ShapeRenderer, Void> event, float time)
boolean isEnabled()
}
interface IElementPlayerManager{ 
private IGraphicContext iGraphicContext;
private ITetrisGrid iTetrisGrid;
private TetrisElement tetrisElement;
void render(float delta)
void pushElementToGrid()
void setPlayerElement(TetrisElement playerElement)
TetrisElement getPlauerElement()
}
interface ITetrisPhysicsWorld{ 
void initWorld()
void updatePhysics(float delta)
Body registerBody(BodyDef bodyDef)
void registerContactListener(ContactListener contactListener)
void render(Camera camera)
void removeBody(Body body)
}
interface IGraphicsGeneration{ 
List<Sprite> createTetrisBlockSprite(List<Vector2> worldPositions, float width)
Sprite createBakgroundBlockSprite(Vector2 worldPosition)
}
"AnotherTetris" --> "ITetrisGrid"
"ITetrisGrid" --> "ITetrisPhysicsWorld"
"ITetrisPhysicsWorld" --> "IPhysicsDebugger"
"ITetrisGrid" --> "IGraphicContext"
"ITetrisGrid" --> "TetrisElementDomainContants"
"ITetrisGrid" --> "TetrisGridContants"
"ITetrisGrid" --> "ITetElementToPositionnedSprite"
"ITetElementToPositionnedSprite" --> "TetrisElementDomainContants"
"ITetElementToPositionnedSprite" --> "IShapeDebugger"
"IShapeDebugger" --> "IPhysicsDebugger"
"ITetrisGrid" --> "SingleDestroyer"
"ITetrisGrid" --> "ITetElementPoolable"
"ITetElementPoolable" --> "TetrisElementDomainContants"
"AnotherTetris" --> "ITetrisPhysicsWorld"
"AnotherTetris" --> "IGraphicContext"
"AnotherTetris" --> "ITetrisRewardDetection"
"ITetrisRewardDetection" --> "ITetrisGrid"
"ITetrisRewardDetection" --> "IElementSpawn"
"IElementSpawn" --> "TetrisElementDomainContants"
"IElementSpawn" --> "ITetrisElementGenerator"
"ITetrisElementGenerator" --> "ITetElementPoolable"
"ITetrisElementGenerator" --> "TetrisElementDomainContants"
"ITetrisElementGenerator" --> "IGraphicsGeneration"
"ITetrisElementGenerator" --> "IPhysicsGeneration"
"IPhysicsGeneration" --> "ITetrisPhysicsWorld"
"IPhysicsGeneration" --> "ITetrisPhysicsContactGeneration"
"ITetrisPhysicsContactGeneration" --> "TetrisElementDomainContants"
"ITetrisPhysicsContactGeneration" --> "ITetrisPhysicsWorld"
"ITetrisPhysicsContactGeneration" --> "ITetrisGrid"
"ITetrisPhysicsContactGeneration" --> "IElementPlayerManager"
"IElementPlayerManager" --> "ITetrisGrid"
"IElementPlayerManager" --> "TetrisElementDomainContants"
"IElementPlayerManager" --> "IGraphicContext"
"ITetrisPhysicsContactGeneration" --> "IMultipleContactListener"
"ITetrisElementGenerator" --> "TetrisGridContants"
"ITetrisElementGenerator" --> "IShapeDebugger"
"IElementSpawn" --> "IElementPlayerManager"
"ITetrisRewardDetection" --> "null"
"null" --> "TetrisElementDomainContants"
"null" --> "ITetElementVolumeCalculation"
"ITetElementVolumeCalculation" --> "IShapeDebugger"
"null" --> "null"
"AnotherTetris" --> "IGridInitializer"
"IGridInitializer" --> "ITetrisGrid"
"IGridInitializer" --> "ITetrisElementGenerator"
"IGridInitializer" --> "TetrisGridContants"
"IGridInitializer" --> "IOutboundDestroyerGenerator"
"IOutboundDestroyerGenerator" --> "SingleDestroyer"
"IOutboundDestroyerGenerator" --> "IPhysicsGeneration"
"IOutboundDestroyerGenerator" --> "ITetrisPhysicsContactGeneration"
"IOutboundDestroyerGenerator" --> "TetrisElementDomainContants"
"IOutboundDestroyerGenerator" --> "IElementEraser"
"IElementEraser" --> "TetrisElementDomainContants"
"IElementEraser" --> "ITetrisGrid"
"IElementEraser" --> "ITetrisPhysicsWorld"
"AnotherTetris" --> "IElementPlayerManager"
"AnotherTetris" --> "IShapeDebugger"
"AnotherTetris" --> "IElementEraser"
@enduml
